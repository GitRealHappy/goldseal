// Services Grid Section - full-bleed, no gaps, slick modern cards
.services-section {
  width: 100%;
  overflow: hidden;
}

.services-section__title {
  margin-bottom: $space-xs;
}

.services-section__lead {
  margin-bottom: $space-lg;
}

.services-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0;
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);

  @media (min-width: $bp-md) {
    grid-template-columns: 1fr 1fr;
  }

  @media (min-width: $bp-lg) {
    grid-template-columns: repeat(4, 1fr);
  }
}

// Service cards: full-bleed, no radius, slick modern
.service-card {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  padding: unquote("clamp(#{$space-lg}, 5vw, #{$space-xl})");
  background-color: $surface-2;
  border-radius: 0;
  text-decoration: none;
  color: $text-primary;
  transition: background-color $transition-smooth, color $transition-smooth;
  height: 100%;
  border: none;
  border-right: $border-subtle;
  border-bottom: $border-subtle;
  overflow: hidden;

  // Hover overlay: darkens smoothly (keeps image visible)
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.35);
    opacity: 0;
    transition: opacity $transition-smooth;
    pointer-events: none;
    z-index: 0;
  }
  &:hover::before {
    opacity: 1;
  }

  // All cards: dark mode by default with background images when NOT hovering
  &:nth-child(1),
  &:nth-child(2),
  &:nth-child(3),
  &:nth-child(4) {
    background-color: $surface-dark;
    color: $text-on-dark;

    .service-card__desc,
    .service-card__title {
      color: inherit;
    }
    .service-link {
      color: $accent-primary-light;
    }
    .service-card__icon {
      background: linear-gradient(135deg, $accent-primary 0%, $accent-primary-dark 100%);
    }
  }

  // Card 1 (Heat Pumps): background image when NOT hovering
  &:nth-child(1) {
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/placeholder1.png');
    background-size: cover;
    background-position: center;
  }

  // Card 2 (Furnaces & Boilers): background image when NOT hovering
  &:nth-child(2) {
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/placeholder2.png');
    background-size: cover;
    background-position: center;
  }

  // Card 3 (Water Heaters): background image when NOT hovering
  &:nth-child(3) {
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/waterheater.png');
    background-size: cover;
    background-position: center;
  }

  // Card 4 (Mechanical Services): background image when NOT hovering
  &:nth-child(4) {
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/mechanical.png');
    background-size: cover;
    background-position: center;
  }

  // Border logic: 1 col mobile, 2 col tablet, 4 col desktop
  @media (max-width: #{$bp-md - 1px}) {
    border-right: none;
    &:last-child {
      border-bottom: none;
    }
  }

  @media (min-width: $bp-md) and (max-width: #{$bp-lg - 1px}) {
    &:nth-child(2n) {
      border-right: none;
    }
    &:nth-last-child(-n + 2) {
      border-bottom: none;
    }
  }

  @media (min-width: $bp-lg) {
    &:nth-child(4n) {
      border-right: none;
    }
    &:nth-last-child(-n + 4) {
      border-bottom: none;
    }
  }

  // Hover: darker overlay, background image stays visible, gold text brightens
  &:hover {
    background-color: transparent;
    color: $text-on-dark;
    text-decoration: none;

    .service-card__desc,
    .service-card__title {
      color: $text-on-dark;
    }
    .service-link {
      color: #fff;
    }
    .service-card__icon {
      background: linear-gradient(135deg, lighten($accent-primary-light, 12%) 0%, $accent-primary-light 100%);
    }
  }


  &:focus-visible {
    outline: $focus-ring-width solid $focus-ring;
    outline-offset: $focus-ring-offset;
  }
}

.service-card__inner {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  width: 100%;
  transition: transform 0.15s ease-out;
}

.service-card__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.75rem;
  height: 2.75rem;
  margin-bottom: $space-sm;
  border-radius: $radius-md;
  background: linear-gradient(135deg, $accent-secondary 0%, $accent-secondary-dark 100%);
  color: $text-on-dark;
  font-size: 1.25rem;
  flex-shrink: 0;

  &::before {
    content: '';
    width: 1.25rem;
    height: 1.25rem;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }
}

.service-card__icon--thermometer::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8e8e8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z'/%3E%3C/svg%3E");
}

.service-card__icon--fire::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8e8e8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'/%3E%3C/svg%3E");
}

.service-card__icon--droplet::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8e8e8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z'/%3E%3C/svg%3E");
}

.service-card__icon--wrench::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e8e8e8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'/%3E%3C/svg%3E");
}

.service-card__title {
  margin-top: 0;
  margin-bottom: $space-sm;
  font-size: unquote("clamp(1.375rem, 1.2rem + 0.5vw, 1.5rem)");
  color: $text-primary;
  font-weight: 700;
}

.service-card__desc {
  margin-bottom: $space-md;
  color: $text-muted;
  line-height: 1.55;
  font-size: 1.05rem;
  flex-grow: 1;
}

.service-card .service-link {
  font-weight: 600;
  color: $accent-primary;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  transition: color $transition-base;
}

.service-card .service-link::after {
  content: 'â†’';
  transition: transform $transition-smooth;
}

.service-card:hover .service-link::after {
  transform: translateX(4px);
}
